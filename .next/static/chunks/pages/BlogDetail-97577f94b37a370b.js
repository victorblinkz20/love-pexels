(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[463],{7438:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>q});var l=a(7876),r=a(4232),t=a(8307),i=a(4952),n=a(5972),c=a(1668),o=a(4378);let d=async e=>{let s=new Date().toISOString().split("T")[0],{data:a,error:l}=await o.N.from("analytics").select("*").eq("blog_id",e).eq("date",s).single();if(l&&"PGRST116"!==l.code)return void console.error("Error fetching existing analytics:",l);if(a){let{error:e}=await o.N.from("analytics").update({page_views:(a.page_views||0)+1,unique_visitors:(a.unique_visitors||0)+1,avg_time_on_page:a.avg_time_on_page||0,bounce_rate:a.bounce_rate||0,geo_distribution:a.geo_distribution||{},referral_sources:a.referral_sources||{}}).eq("id",a.id);e&&console.error("Error updating analytics:",e)}else{let{error:a}=await o.N.from("analytics").insert([{blog_id:e,date:s,page_views:1,unique_visitors:1,avg_time_on_page:0,bounce_rate:0,geo_distribution:{},referral_sources:{}}]);a&&console.error("Error creating analytics:",a)}};var m=a(753),x=a(6466),h=a(8305),u=a(8194),g=a(6907);let p=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)(u.bL,{ref:s,className:(0,g.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});p.displayName=u.bL.displayName;let N=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)(u._V,{ref:s,className:(0,g.cn)("aspect-square h-full w-full",a),...r})});N.displayName=u._V.displayName;let f=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)(u.H4,{ref:s,className:(0,g.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});f.displayName=u.H4.displayName;var j=a(8009),v=a(1521),b=a(6526),w=a(4753),y=a(208),_=a(758),E=a(2740);let k=e=>{let{currentBlogId:s,categoryName:a}=e;console.log("RelatedArticles props:",{currentBlogId:s,categoryName:a});let{data:r,isLoading:t,error:o}=(0,n.I)({queryKey:["relatedArticles",a],queryFn:async()=>{let e=await (0,c.gb)("published");console.log("All published blogs:",e);let l=e.filter(e=>{var l,r;let t=!a||(null==(l=e.categories)?void 0:l.name)===a,i=e.id!==s;return console.log("Blog filtering:",{blogId:e.id,blogCategory:null==(r=e.categories)?void 0:r.name,targetCategory:a,isSameCategory:t,isNotCurrent:i}),t&&i}).slice(0,3);return console.log("Filtered related articles:",l),l}});return t?(0,l.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,l.jsxs)("div",{className:"flex items-start",children:[(0,l.jsx)(h.E,{className:"w-20 h-20 rounded flex-shrink-0"}),(0,l.jsxs)("div",{className:"ml-3 flex-1",children:[(0,l.jsx)(h.E,{className:"h-4 w-3/4 mb-2"}),(0,l.jsx)(h.E,{className:"h-3 w-1/2"})]})]},e))}):o?(console.error("Error fetching related articles:",o),(0,l.jsx)("div",{className:"text-center py-4",children:(0,l.jsx)("p",{className:"text-gray-500",children:"Error loading related articles."})})):r&&0!==r.length?(0,l.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,l.jsxs)(i.N_,{to:"/blog/".concat(e.id),className:"flex items-start group hover:bg-gray-50 p-2 rounded-lg transition-colors",children:[(0,l.jsx)("div",{className:"w-20 h-20 rounded overflow-hidden flex-shrink-0",children:(0,l.jsx)("img",{src:e.image_url||"https://images.pexels.com/photos/5327580/pexels-photo-5327580.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),(0,l.jsxs)("div",{className:"ml-3 flex-1 min-w-0",children:[(0,l.jsx)("h4",{className:"font-medium text-sm leading-tight group-hover:text-news-orange transition-colors line-clamp-2 mb-1",children:e.title}),(0,l.jsxs)("div",{className:"flex items-center text-xs text-gray-500 space-x-2",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(v.A,{size:12,className:"mr-1 flex-shrink-0"}),(0,l.jsx)("span",{className:"whitespace-nowrap",children:new Date(e.created_at).toLocaleDateString()})]}),(0,l.jsx)("span",{children:"â€¢"}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(b.A,{size:12,className:"mr-1 flex-shrink-0"}),(0,l.jsxs)("span",{className:"whitespace-nowrap",children:[e.views.toLocaleString()," views"]})]})]})]})]},e.id))}):(console.log("No related articles found"),(0,l.jsx)("div",{className:"text-center py-4",children:(0,l.jsx)("p",{className:"text-gray-500",children:"No related articles available."})}))},A=()=>(0,l.jsxs)("div",{children:[(0,l.jsx)(h.E,{className:"h-10 w-40 mb-2"}),(0,l.jsx)(h.E,{className:"h-12 w-full mb-4"}),(0,l.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(h.E,{className:"h-10 w-10 rounded-full mr-3"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(h.E,{className:"h-5 w-32 mb-1"}),(0,l.jsx)(h.E,{className:"h-4 w-24"})]})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(h.E,{className:"h-6 w-24 mr-2"}),(0,l.jsx)(h.E,{className:"h-6 w-20"})]})]}),(0,l.jsx)(h.E,{className:"h-[400px] w-full mb-10"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,l.jsxs)("div",{className:"lg:col-span-8",children:[(0,l.jsx)(h.E,{className:"h-6 w-full mb-4"}),(0,l.jsx)(h.E,{className:"h-6 w-full mb-4"}),(0,l.jsx)(h.E,{className:"h-6 w-2/3 mb-8"}),(0,l.jsx)(h.E,{className:"h-6 w-full mb-4"}),(0,l.jsx)(h.E,{className:"h-6 w-full mb-4"}),(0,l.jsx)(h.E,{className:"h-6 w-5/6 mb-8"}),(0,l.jsx)(h.E,{className:"h-10 w-full mt-8"})]}),(0,l.jsx)("div",{className:"lg:col-span-4",children:(0,l.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,l.jsx)(h.E,{className:"h-8 w-40 mb-4"}),(0,l.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,l.jsxs)("div",{className:"flex items-start",children:[(0,l.jsx)(h.E,{className:"w-20 h-20 flex-shrink-0"}),(0,l.jsxs)("div",{className:"ml-3 flex-grow",children:[(0,l.jsx)(h.E,{className:"h-4 w-full mb-1"}),(0,l.jsx)(h.E,{className:"h-4 w-full mb-1"}),(0,l.jsx)(h.E,{className:"h-3 w-16"})]})]},e))})]})})]})]}),q=()=>{var e,s;let{id:a}=(0,t.g)(),{data:o,isLoading:h,error:u}=(0,n.I)({queryKey:["blog",a],queryFn:()=>a?(0,c.dZ)(a):Promise.reject("No ID provided"),enabled:!!a});(0,r.useEffect)(()=>{a&&((0,c.eD)(a).catch(e=>console.error("Error incrementing view count:",e)),d(a).catch(e=>console.error("Error recording analytics:",e)))},[a]);let g=e=>{let s=window.location.href,a=(null==o?void 0:o.title)||"Check out this blog post";switch(e){case"facebook":window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(s)),"_blank");break;case"twitter":window.open("https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(a),"&url=").concat(encodeURIComponent(s)),"_blank");break;case"copy":navigator.clipboard.writeText(s),alert("Link copied to clipboard!")}};return(0,l.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,l.jsx)(m.A,{}),(0,l.jsx)("main",{className:"flex-grow pt-6 pb-16",children:(0,l.jsx)("div",{className:"container mx-auto px-4 md:px-0",children:h?(0,l.jsx)(A,{}):u?(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-red-500 mb-4",children:"Error Loading Blog Post"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"We couldn't load the blog post you're looking for. It may have been removed or there was a temporary issue."}),(0,l.jsx)(i.N_,{to:"/",className:"text-news-orange hover:underline",children:"Return to Homepage"})]}):o?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)(i.N_,{to:"/",className:"text-news-orange hover:underline mb-2 inline-block",children:"\xab Back to News"}),(0,l.jsx)("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold leading-tight mb-4",children:o.title}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8",children:[(0,l.jsxs)("div",{className:"flex items-center mb-4 sm:mb-0",children:[(0,l.jsxs)(p,{className:"h-10 w-10 mr-3",children:[(0,l.jsx)(N,{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=Alex",alt:"Author"}),(0,l.jsx)(f,{children:"JP"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium",children:"The Editor"}),(0,l.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,l.jsx)(v.A,{size:14,className:"mr-1"}),new Date(o.created_at).toLocaleDateString()]})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)("div",{className:"flex items-center text-gray-500 mr-4",children:[(0,l.jsx)(b.A,{size:18,className:"mr-1"}),(0,l.jsxs)("span",{children:[o.views," views"]})]}),(0,l.jsx)(j.E,{variant:"outline",className:"bg-gray-100",children:(null==(e=o.categories)?void 0:e.name)||"Uncategorized"})]})]})]}),(0,l.jsx)("div",{className:"mb-10 rounded-lg overflow-hidden shadow-md",children:(0,l.jsx)("img",{src:o.image_url||"https://images.pexels.com/photos/1263349/pexels-photo-1263349.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",alt:o.title,className:"w-full h-auto md:h-[500px] object-cover"})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,l.jsxs)("div",{className:"lg:col-span-8",children:[(0,l.jsx)("div",{className:"prose prose-lg max-w-none mb-8",dangerouslySetInnerHTML:{__html:o.content}}),(0,l.jsxs)("div",{className:"flex items-center space-x-3 mt-12 border-t border-b py-4",children:[(0,l.jsx)("span",{className:"font-medium",children:"Share:"}),(0,l.jsx)(E.$,{variant:"outline",size:"icon",onClick:()=>g("facebook"),className:"rounded-full h-8 w-8",children:(0,l.jsx)(w.A,{size:16})}),(0,l.jsx)(E.$,{variant:"outline",size:"icon",onClick:()=>g("twitter"),className:"rounded-full h-8 w-8",children:(0,l.jsx)(y.A,{size:16})}),(0,l.jsx)(E.$,{variant:"outline",size:"icon",onClick:()=>g("copy"),className:"rounded-full h-8 w-8",children:(0,l.jsx)(_.A,{size:16})})]})]}),(0,l.jsx)("div",{className:"lg:col-span-4",children:(0,l.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg sticky top-8",children:[(0,l.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Related Articles"}),o&&(0,l.jsx)(k,{currentBlogId:o.id,categoryName:(null==(s=o.categories)?void 0:s.name)||""})]})})]})]}):(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Blog Post Not Found"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"The blog post you're looking for doesn't exist or has been removed."}),(0,l.jsx)(i.N_,{to:"/",className:"text-news-orange hover:underline",children:"Return to Homepage"})]})})}),(0,l.jsx)(x.A,{})]})}},7678:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/BlogDetail",function(){return a(7438)}])},8009:(e,s,a)=>{"use strict";a.d(s,{E:()=>n});var l=a(7876);a(4232);var r=a(7137),t=a(6907);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:a,...r}=e;return(0,l.jsx)("div",{className:(0,t.cn)(i({variant:a}),s),...r})}},8305:(e,s,a)=>{"use strict";a.d(s,{E:()=>t});var l=a(7876),r=a(6907);function t(e){let{className:s,...a}=e;return(0,l.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",s),...a})}}},e=>{var s=s=>e(e.s=s);e.O(0,[796,307,561,952,803,440,48,636,593,792],()=>s(7678)),_N_E=e.O()}]);